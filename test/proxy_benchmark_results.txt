*** Original j.l.r.Proxy

##############################################################
# Java: 1.8.0-internal-peter_2013_04_10_12_49-b00
#   VM: OpenJDK 64-Bit Server VM 25.0-b25 (mixed mode)
#   OS: Linux 3.8.4-102.fc17.x86_64 (amd64)
# CPUs: 8 (virtual)
#
#-------------------------------------------------------------
# Proxy_getProxyClass: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =  2,445.76 ns/op (σ =   0.00 ns/op) [ 2,445.76]
#           1 threads, Tavg =  2,389.64 ns/op (σ =   0.00 ns/op) [ 2,389.64]
# Measure:
            1 threads, Tavg =  2,403.27 ns/op (σ =   0.00 ns/op) [ 2,403.27]
            2 threads, Tavg =  2,857.13 ns/op (σ =   1.22 ns/op) [ 2,858.35,  2,855.91]
            3 threads, Tavg =  2,941.02 ns/op (σ =  18.31 ns/op) [ 2,916.95,  2,945.19,  2,961.25]
            4 threads, Tavg =  3,039.01 ns/op (σ =  22.23 ns/op) [ 3,056.64,  3,019.15,  3,065.63,  3,015.27]
            5 threads, Tavg =  3,652.98 ns/op (σ =  62.20 ns/op) [ 3,715.53,  3,694.78,  3,687.68,  3,544.05,  3,628.22]
            6 threads, Tavg =  4,252.06 ns/op (σ = 137.22 ns/op) [ 4,220.75,  3,989.52,  4,440.52,  4,321.73,  4,264.49,  4,302.59]
            7 threads, Tavg =  4,745.67 ns/op (σ =  61.70 ns/op) [ 4,809.29,  4,769.16,  4,715.47,  4,692.55,  4,830.76,  4,765.74,  4,642.35]
            8 threads, Tavg =  5,193.58 ns/op (σ =  14.34 ns/op) [ 5,215.65,  5,195.30,  5,185.18,  5,185.25,  5,186.11,  5,211.02,  5,201.26,  5,169.16]
#
#-------------------------------------------------------------
# Proxy_isProxyClassTrue: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =     95.12 ns/op (σ =   0.00 ns/op) [    95.12]
#           1 threads, Tavg =     94.98 ns/op (σ =   0.00 ns/op) [    94.98]
# Measure:
            1 threads, Tavg =     95.02 ns/op (σ =   0.00 ns/op) [    95.02]
            2 threads, Tavg =    577.47 ns/op (σ =  34.91 ns/op) [   614.42,    544.72]
            3 threads, Tavg =  1,833.98 ns/op (σ = 123.00 ns/op) [ 2,012.33,  1,728.29,  1,784.95]
            4 threads, Tavg =  2,266.29 ns/op (σ = 102.66 ns/op) [ 2,260.99,  2,231.88,  2,435.30,  2,155.02]
            5 threads, Tavg =  3,063.85 ns/op (σ =  21.18 ns/op) [ 3,073.74,  3,070.79,  3,089.57,  3,059.70,  3,026.20]
            6 threads, Tavg =  3,510.36 ns/op (σ =  47.18 ns/op) [ 3,457.57,  3,601.64,  3,478.86,  3,491.00,  3,499.18,  3,537.68]
            7 threads, Tavg =  4,187.63 ns/op (σ =  27.45 ns/op) [ 4,199.99,  4,135.50,  4,177.05,  4,166.16,  4,206.21,  4,215.87,  4,213.90]
            8 threads, Tavg =  4,782.29 ns/op (σ = 274.82 ns/op) [ 4,817.05,  5,026.20,  4,784.36,  4,103.67,  4,847.51,  4,982.26,  4,893.93,  4,944.36]
#
#-------------------------------------------------------------
# Proxy_isProxyClassFalse: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =     64.27 ns/op (σ =   0.00 ns/op) [    64.27]
#           1 threads, Tavg =     63.93 ns/op (σ =   0.00 ns/op) [    63.93]
# Measure:
            1 threads, Tavg =     95.02 ns/op (σ =   0.00 ns/op) [    95.02]
            2 threads, Tavg =    599.59 ns/op (σ =   3.55 ns/op) [   603.16,    596.07]
            3 threads, Tavg =  1,594.84 ns/op (σ =  27.66 ns/op) [ 1,629.36,  1,561.61,  1,594.98]
            4 threads, Tavg =  2,186.59 ns/op (σ =  51.36 ns/op) [ 2,123.59,  2,246.95,  2,152.16,  2,228.46]
            5 threads, Tavg =  2,919.45 ns/op (σ =  43.68 ns/op) [ 2,940.82,  2,934.57,  2,961.15,  2,835.57,  2,928.46]
            6 threads, Tavg =  2,917.85 ns/op (σ =  55.20 ns/op) [ 2,974.22,  2,870.14,  3,014.52,  2,893.08,  2,887.70,  2,873.59]
            7 threads, Tavg =  4,188.03 ns/op (σ =  52.05 ns/op) [ 4,235.57,  4,248.35,  4,193.16,  4,244.93,  4,122.79,  4,121.65,  4,154.28]
            8 threads, Tavg =  4,891.15 ns/op (σ =  76.49 ns/op) [ 4,964.43,  4,932.04,  4,854.98,  4,797.26,  4,826.26,  4,798.93,  4,993.88,  4,970.98]
#
#-------------------------------------------------------------
# Annotation_equals: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =    241.91 ns/op (σ =   0.00 ns/op) [   241.91]
#           1 threads, Tavg =    238.78 ns/op (σ =   0.00 ns/op) [   238.78]
# Measure:
            1 threads, Tavg =    240.10 ns/op (σ =   0.00 ns/op) [   240.10]
            2 threads, Tavg =    638.54 ns/op (σ =   3.02 ns/op) [   641.58,    635.54]
            3 threads, Tavg =  1,249.49 ns/op (σ =  36.86 ns/op) [ 1,221.30,  1,302.52,  1,227.84]
            4 threads, Tavg =  1,864.06 ns/op (σ =  47.25 ns/op) [ 1,816.46,  1,939.45,  1,871.39,  1,833.64]
            5 threads, Tavg =  4,491.67 ns/op (σ =  92.43 ns/op) [ 4,605.56,  4,416.34,  4,393.49,  4,448.59,  4,603.81]
            6 threads, Tavg =  7,562.53 ns/op (σ =  49.61 ns/op) [ 7,559.25,  7,664.58,  7,535.61,  7,573.56,  7,532.58,  7,511.52]
            7 threads, Tavg =  8,649.28 ns/op (σ =  52.86 ns/op) [ 8,700.63,  8,619.52,  8,645.00,  8,584.68,  8,730.72,  8,584.81,  8,681.82]
            8 threads, Tavg =  8,639.20 ns/op (σ = 210.85 ns/op) [ 8,690.01,  8,866.95,  8,223.37,  8,715.41,  8,770.44,  8,877.61,  8,425.70,  8,586.04]
#
#-------------------------------------------------------------
# END.
##############################################################


*** Patched j.l.r.Proxy (with a field added to ClassLoader)

##############################################################
# Java: 1.8.0-internal-peter_2013_04_10_12_49-b00
#   VM: OpenJDK 64-Bit Server VM 25.0-b25 (mixed mode)
#   OS: Linux 3.8.4-102.fc17.x86_64 (amd64)
# CPUs: 8 (virtual)
#
#-------------------------------------------------------------
# Proxy_getProxyClass: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =    164.45 ns/op (σ =   0.00 ns/op) [   164.45]
#           1 threads, Tavg =    162.69 ns/op (σ =   0.00 ns/op) [   162.69]
# Measure:
            1 threads, Tavg =    163.70 ns/op (σ =   0.00 ns/op) [   163.70]
            2 threads, Tavg =    163.08 ns/op (σ =   0.35 ns/op) [   163.43,    162.73]
            3 threads, Tavg =    216.44 ns/op (σ =   1.24 ns/op) [   216.13,    215.11,    218.11]
            4 threads, Tavg =    202.77 ns/op (σ =  23.17 ns/op) [   218.34,    218.19,    220.39,    165.94]
            5 threads, Tavg =    246.48 ns/op (σ =  32.86 ns/op) [   187.82,    278.50,    261.65,    261.94,    268.02]
            6 threads, Tavg =    282.66 ns/op (σ =   7.72 ns/op) [   269.68,    287.02,    275.36,    286.16,    287.14,    291.86]
            7 threads, Tavg =    322.07 ns/op (σ =   8.20 ns/op) [   320.38,    334.61,    319.59,    334.14,    310.69,    317.95,    318.58]
            8 threads, Tavg =    314.47 ns/op (σ =  33.05 ns/op) [   334.05,    320.32,    336.13,    336.98,    339.15,    234.38,    316.84,    332.21]
#
#-------------------------------------------------------------
# Proxy_isProxyClassTrue: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =     11.17 ns/op (σ =   0.00 ns/op) [    11.17]
#           1 threads, Tavg =     11.08 ns/op (σ =   0.00 ns/op) [    11.08]
# Measure:
            1 threads, Tavg =     10.78 ns/op (σ =   0.00 ns/op) [    10.78]
            2 threads, Tavg =     10.77 ns/op (σ =   0.01 ns/op) [    10.78,     10.76]
            3 threads, Tavg =     10.79 ns/op (σ =   0.03 ns/op) [    10.77,     10.77,     10.83]
            4 threads, Tavg =     10.80 ns/op (σ =   0.03 ns/op) [    10.77,     10.85,     10.81,     10.77]
            5 threads, Tavg =     13.47 ns/op (σ =   3.66 ns/op) [    12.94,     10.89,     20.52,     15.72,     11.15]
            6 threads, Tavg =     15.87 ns/op (σ =   4.45 ns/op) [    10.87,     19.96,     20.36,     20.38,     11.41,     19.98]
            7 threads, Tavg =     18.22 ns/op (σ =   5.31 ns/op) [    22.57,     16.10,     22.03,     25.92,     13.29,     12.72,     24.95]
            8 threads, Tavg =     20.53 ns/op (σ =   5.09 ns/op) [    25.89,     21.87,     26.62,     20.31,     10.82,     26.48,     21.89,     23.43]
#
#-------------------------------------------------------------
# Proxy_isProxyClassFalse: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36]
#           1 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36]
# Measure:
            1 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36]
            2 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36,      1.36]
            3 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36,      1.37,      1.36]
            4 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36,      1.36,      1.36,      1.37]
            5 threads, Tavg =      1.70 ns/op (σ =   0.69 ns/op) [     1.36,      1.36,      2.71,      1.37,      2.71]
            6 threads, Tavg =      2.04 ns/op (σ =   0.57 ns/op) [     2.71,      1.99,      1.67,      2.71,      1.36,      2.73]
            7 threads, Tavg =      2.44 ns/op (σ =   0.40 ns/op) [     1.74,      2.81,      2.07,      2.70,      2.78,      2.79,      2.70]
            8 threads, Tavg =      2.72 ns/op (σ =   1.11 ns/op) [     2.95,      3.68,      1.70,      3.83,      3.24,      1.43,      4.30,      4.21]
#
#-------------------------------------------------------------
# Annotation_equals: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =    152.82 ns/op (σ =   0.00 ns/op) [   152.82]
#           1 threads, Tavg =    149.59 ns/op (σ =   0.00 ns/op) [   149.59]
# Measure:
            1 threads, Tavg =    152.29 ns/op (σ =   0.00 ns/op) [   152.29]
            2 threads, Tavg =    151.38 ns/op (σ =   0.12 ns/op) [   151.26,    151.50]
            3 threads, Tavg =    152.22 ns/op (σ =   0.06 ns/op) [   152.23,    152.29,    152.13]
            4 threads, Tavg =    153.81 ns/op (σ =   0.26 ns/op) [   153.59,    154.16,    153.95,    153.53]
            5 threads, Tavg =    182.76 ns/op (σ =   6.48 ns/op) [   172.71,    187.38,    179.47,    191.44,    183.94]
            6 threads, Tavg =    208.31 ns/op (σ =   5.32 ns/op) [   199.16,    204.83,    214.09,    214.27,    207.87,    210.47]
            7 threads, Tavg =    233.00 ns/op (σ =   7.28 ns/op) [   240.49,    245.66,    225.01,    223.68,    231.10,    233.07,    233.57]
            8 threads, Tavg =    262.09 ns/op (σ =   1.54 ns/op) [   261.13,    263.73,    262.14,    263.70,    263.87,    259.08,    261.56,    261.56]
#
#-------------------------------------------------------------
# END.
##############################################################


*** Patched j.l.r.Proxy (using FlattenedWeakCache)

##############################################################
# Java: 1.8.0-internal-peter_2013_04_15_09_59-b00
#   VM: OpenJDK 64-Bit Server VM 25.0-b27 (mixed mode)
#   OS: Linux 3.8.4-102.fc17.x86_64 (amd64)
# CPUs: 8 (virtual)
#
#-------------------------------------------------------------
# Proxy_getProxyClass: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =    213.15 ns/op (σ =   0.00 ns/op) [   213.15]
#           1 threads, Tavg =    208.82 ns/op (σ =   0.00 ns/op) [   208.82]
# Measure:
            1 threads, Tavg =    206.88 ns/op (σ =   0.00 ns/op) [   206.88]
            2 threads, Tavg =    272.66 ns/op (σ =   0.43 ns/op) [   273.08,    272.23]
            3 threads, Tavg =    282.51 ns/op (σ =   0.22 ns/op) [   282.65,    282.68,    282.21]
            4 threads, Tavg =    303.38 ns/op (σ =   1.61 ns/op) [   305.39,    301.86,    301.75,    304.55]
            5 threads, Tavg =    339.82 ns/op (σ =  29.80 ns/op) [   284.58,    346.60,    358.03,    360.33,    364.13]
            6 threads, Tavg =    373.09 ns/op (σ =  38.71 ns/op) [   292.93,    388.86,    403.44,    388.48,    391.53,    401.68]
            7 threads, Tavg =    423.04 ns/op (σ =  22.80 ns/op) [   388.28,    390.21,    433.14,    445.24,    435.12,    445.96,    432.30]
            8 threads, Tavg =    442.58 ns/op (σ =  32.71 ns/op) [   460.37,    456.79,    458.54,    459.26,    454.01,    461.99,    452.99,    359.55]
#
#-------------------------------------------------------------
# Proxy_isProxyClassTrue: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =     45.31 ns/op (σ =   0.00 ns/op) [    45.31]
#           1 threads, Tavg =     44.99 ns/op (σ =   0.00 ns/op) [    44.99]
# Measure:
            1 threads, Tavg =     41.85 ns/op (σ =   0.00 ns/op) [    41.85]
            2 threads, Tavg =     41.80 ns/op (σ =   0.00 ns/op) [    41.80,     41.80]
            3 threads, Tavg =     41.80 ns/op (σ =   0.00 ns/op) [    41.80,     41.80,     41.80]
            4 threads, Tavg =     42.32 ns/op (σ =   0.64 ns/op) [    41.82,     43.38,     42.32,     41.80]
            5 threads, Tavg =     49.73 ns/op (σ =  12.96 ns/op) [    67.15,     41.87,     42.82,     41.87,     68.83]
            6 threads, Tavg =     56.74 ns/op (σ =  12.63 ns/op) [    68.75,     67.03,     42.84,     41.86,     68.78,     68.92]
            7 threads, Tavg =     66.04 ns/op (σ =  34.99 ns/op) [    68.77,     42.80,    123.55,     42.25,     70.70,     68.94,    130.24]
            8 threads, Tavg =     72.29 ns/op (σ =  17.17 ns/op) [    82.85,     68.34,     98.85,     70.39,     98.06,     68.98,     44.37,     80.55]
#
#-------------------------------------------------------------
# Proxy_isProxyClassFalse: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =      1.38 ns/op (σ =   0.00 ns/op) [     1.38]
#           1 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36]
# Measure:
            1 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36]
            2 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36,      1.36]
            3 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36,      1.36,      1.36]
            4 threads, Tavg =      1.37 ns/op (σ =   0.01 ns/op) [     1.36,      1.36,      1.36,      1.38]
            5 threads, Tavg =      1.70 ns/op (σ =   0.69 ns/op) [     1.36,      1.36,      2.72,      1.37,      2.72]
            6 threads, Tavg =      2.05 ns/op (σ =   0.66 ns/op) [     1.39,      2.67,      2.73,      1.37,      2.72,      2.71]
            7 threads, Tavg =      2.39 ns/op (σ =   0.49 ns/op) [     1.39,      2.71,      2.71,      2.71,      2.72,      2.72,      2.73]
            8 threads, Tavg =      2.94 ns/op (σ =   0.52 ns/op) [     3.23,      3.63,      3.70,      2.71,      2.34,      3.15,      2.24,      3.27]
#
#-------------------------------------------------------------
# Annotation_equals: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =    189.61 ns/op (σ =   0.00 ns/op) [   189.61]
#           1 threads, Tavg =    189.01 ns/op (σ =   0.00 ns/op) [   189.01]
# Measure:
            1 threads, Tavg =    193.27 ns/op (σ =   0.00 ns/op) [   193.27]
            2 threads, Tavg =    193.26 ns/op (σ =   0.62 ns/op) [   192.65,    193.88]
            3 threads, Tavg =    196.63 ns/op (σ =   0.98 ns/op) [   198.01,    196.11,    195.80]
            4 threads, Tavg =    195.60 ns/op (σ =   0.92 ns/op) [   195.17,    197.04,    194.55,    195.64]
            5 threads, Tavg =    276.22 ns/op (σ =   9.28 ns/op) [   264.57,    284.35,    266.86,    279.14,    287.73]
            6 threads, Tavg =    292.31 ns/op (σ =   4.90 ns/op) [   297.00,    292.07,    300.35,    288.55,    286.05,    290.35]
            7 threads, Tavg =    336.12 ns/op (σ =   2.09 ns/op) [   334.88,    336.07,    335.18,    334.36,    337.71,    334.27,    340.48]
            8 threads, Tavg =    384.72 ns/op (σ =  10.12 ns/op) [   373.75,    371.91,    393.85,    391.68,    373.06,    400.39,    389.28,    385.96]
#
#-------------------------------------------------------------
# END.
##############################################################


Summary (4 Cores x 2 Threads CPU):

Test                     Threads  ns/op Original  Patched (CL field)  Patched (WeakCache)
=======================  =======  ==============  ==================  ===================
Proxy_getProxyClass            1        2,403.27              163.70               206.88
                               4        3,039.01              202.77               303.38
                               8        5,193.58              314.47               442.58

Proxy_isProxyClassTrue         1           95.02               10.78                41.85
                               4        2,266.29               10.80                42.32
                               8        4,782.29               20.53                72.29

Proxy_isProxyClassFalse        1           95.02                1.36                 1.36
                               4        2,186.59                1.36                 1.37
                               8        4,891.15                2.72                 2.94

Annotation_equals              1          240.10              152.29               193.27
                               4        1,864.06              153.81               195.60
                               8        8,639.20              262.09               384.72
