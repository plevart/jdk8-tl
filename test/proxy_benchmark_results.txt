*** Original j.l.r.Proxy

##############################################################
# Java: 1.8.0-internal-peter_2013_04_10_12_49-b00
#   VM: OpenJDK 64-Bit Server VM 25.0-b25 (mixed mode)
#   OS: Linux 3.8.4-102.fc17.x86_64 (amd64)
# CPUs: 8 (virtual)
#
#-------------------------------------------------------------
# Proxy_getProxyClass: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =  2,445.76 ns/op (σ =   0.00 ns/op) [ 2,445.76]
#           1 threads, Tavg =  2,389.64 ns/op (σ =   0.00 ns/op) [ 2,389.64]
# Measure:
            1 threads, Tavg =  2,403.27 ns/op (σ =   0.00 ns/op) [ 2,403.27]
            2 threads, Tavg =  2,857.13 ns/op (σ =   1.22 ns/op) [ 2,858.35,  2,855.91]
            3 threads, Tavg =  2,941.02 ns/op (σ =  18.31 ns/op) [ 2,916.95,  2,945.19,  2,961.25]
            4 threads, Tavg =  3,039.01 ns/op (σ =  22.23 ns/op) [ 3,056.64,  3,019.15,  3,065.63,  3,015.27]
            5 threads, Tavg =  3,652.98 ns/op (σ =  62.20 ns/op) [ 3,715.53,  3,694.78,  3,687.68,  3,544.05,  3,628.22]
            6 threads, Tavg =  4,252.06 ns/op (σ = 137.22 ns/op) [ 4,220.75,  3,989.52,  4,440.52,  4,321.73,  4,264.49,  4,302.59]
            7 threads, Tavg =  4,745.67 ns/op (σ =  61.70 ns/op) [ 4,809.29,  4,769.16,  4,715.47,  4,692.55,  4,830.76,  4,765.74,  4,642.35]
            8 threads, Tavg =  5,193.58 ns/op (σ =  14.34 ns/op) [ 5,215.65,  5,195.30,  5,185.18,  5,185.25,  5,186.11,  5,211.02,  5,201.26,  5,169.16]
#
#-------------------------------------------------------------
# Proxy_isProxyClassTrue: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =     95.12 ns/op (σ =   0.00 ns/op) [    95.12]
#           1 threads, Tavg =     94.98 ns/op (σ =   0.00 ns/op) [    94.98]
# Measure:
            1 threads, Tavg =     95.02 ns/op (σ =   0.00 ns/op) [    95.02]
            2 threads, Tavg =    577.47 ns/op (σ =  34.91 ns/op) [   614.42,    544.72]
            3 threads, Tavg =  1,833.98 ns/op (σ = 123.00 ns/op) [ 2,012.33,  1,728.29,  1,784.95]
            4 threads, Tavg =  2,266.29 ns/op (σ = 102.66 ns/op) [ 2,260.99,  2,231.88,  2,435.30,  2,155.02]
            5 threads, Tavg =  3,063.85 ns/op (σ =  21.18 ns/op) [ 3,073.74,  3,070.79,  3,089.57,  3,059.70,  3,026.20]
            6 threads, Tavg =  3,510.36 ns/op (σ =  47.18 ns/op) [ 3,457.57,  3,601.64,  3,478.86,  3,491.00,  3,499.18,  3,537.68]
            7 threads, Tavg =  4,187.63 ns/op (σ =  27.45 ns/op) [ 4,199.99,  4,135.50,  4,177.05,  4,166.16,  4,206.21,  4,215.87,  4,213.90]
            8 threads, Tavg =  4,782.29 ns/op (σ = 274.82 ns/op) [ 4,817.05,  5,026.20,  4,784.36,  4,103.67,  4,847.51,  4,982.26,  4,893.93,  4,944.36]
#
#-------------------------------------------------------------
# Proxy_isProxyClassFalse: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =     64.27 ns/op (σ =   0.00 ns/op) [    64.27]
#           1 threads, Tavg =     63.93 ns/op (σ =   0.00 ns/op) [    63.93]
# Measure:
            1 threads, Tavg =     95.02 ns/op (σ =   0.00 ns/op) [    95.02]
            2 threads, Tavg =    599.59 ns/op (σ =   3.55 ns/op) [   603.16,    596.07]
            3 threads, Tavg =  1,594.84 ns/op (σ =  27.66 ns/op) [ 1,629.36,  1,561.61,  1,594.98]
            4 threads, Tavg =  2,186.59 ns/op (σ =  51.36 ns/op) [ 2,123.59,  2,246.95,  2,152.16,  2,228.46]
            5 threads, Tavg =  2,919.45 ns/op (σ =  43.68 ns/op) [ 2,940.82,  2,934.57,  2,961.15,  2,835.57,  2,928.46]
            6 threads, Tavg =  2,917.85 ns/op (σ =  55.20 ns/op) [ 2,974.22,  2,870.14,  3,014.52,  2,893.08,  2,887.70,  2,873.59]
            7 threads, Tavg =  4,188.03 ns/op (σ =  52.05 ns/op) [ 4,235.57,  4,248.35,  4,193.16,  4,244.93,  4,122.79,  4,121.65,  4,154.28]
            8 threads, Tavg =  4,891.15 ns/op (σ =  76.49 ns/op) [ 4,964.43,  4,932.04,  4,854.98,  4,797.26,  4,826.26,  4,798.93,  4,993.88,  4,970.98]
#
#-------------------------------------------------------------
# Annotation_equals: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =    241.91 ns/op (σ =   0.00 ns/op) [   241.91]
#           1 threads, Tavg =    238.78 ns/op (σ =   0.00 ns/op) [   238.78]
# Measure:
            1 threads, Tavg =    240.10 ns/op (σ =   0.00 ns/op) [   240.10]
            2 threads, Tavg =    638.54 ns/op (σ =   3.02 ns/op) [   641.58,    635.54]
            3 threads, Tavg =  1,249.49 ns/op (σ =  36.86 ns/op) [ 1,221.30,  1,302.52,  1,227.84]
            4 threads, Tavg =  1,864.06 ns/op (σ =  47.25 ns/op) [ 1,816.46,  1,939.45,  1,871.39,  1,833.64]
            5 threads, Tavg =  4,491.67 ns/op (σ =  92.43 ns/op) [ 4,605.56,  4,416.34,  4,393.49,  4,448.59,  4,603.81]
            6 threads, Tavg =  7,562.53 ns/op (σ =  49.61 ns/op) [ 7,559.25,  7,664.58,  7,535.61,  7,573.56,  7,532.58,  7,511.52]
            7 threads, Tavg =  8,649.28 ns/op (σ =  52.86 ns/op) [ 8,700.63,  8,619.52,  8,645.00,  8,584.68,  8,730.72,  8,584.81,  8,681.82]
            8 threads, Tavg =  8,639.20 ns/op (σ = 210.85 ns/op) [ 8,690.01,  8,866.95,  8,223.37,  8,715.41,  8,770.44,  8,877.61,  8,425.70,  8,586.04]
#
#-------------------------------------------------------------
# END.
##############################################################


*** Patched j.l.r.Proxy (WeakCache using validation in getProxyClass0)

##############################################################
# Java: 1.8.0-internal-peter_2013_04_19_08_58-b00
#   VM: OpenJDK 64-Bit Server VM 25.0-b28 (mixed mode)
#   OS: Linux 3.8.4-102.fc17.x86_64 (amd64)
# CPUs: 8 (virtual)
#
#-------------------------------------------------------------
# Proxy_getProxyClass: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =  2,198.24 ns/op (σ =   0.00 ns/op) [ 2,198.24]
#           1 threads, Tavg =  2,165.95 ns/op (σ =   0.00 ns/op) [ 2,165.95]
# Measure:
            1 threads, Tavg =  2,174.51 ns/op (σ =   0.00 ns/op) [ 2,174.51]
            2 threads, Tavg =  2,315.13 ns/op (σ =   1.05 ns/op) [ 2,314.07,  2,316.18]
            3 threads, Tavg =  2,353.68 ns/op (σ =   2.43 ns/op) [ 2,355.79,  2,350.28,  2,354.98]
            4 threads, Tavg =  2,555.00 ns/op (σ =  34.98 ns/op) [ 2,523.52,  2,532.55,  2,613.25,  2,552.58]
            5 threads, Tavg =  2,921.63 ns/op (σ = 122.77 ns/op) [ 2,797.64,  2,829.22,  3,051.52,  2,858.54,  3,096.56]
            6 threads, Tavg =  3,411.70 ns/op (σ = 152.92 ns/op) [ 3,255.06,  3,501.53,  3,669.18,  3,481.74,  3,223.29,  3,380.03]
            7 threads, Tavg =  3,837.83 ns/op (σ = 119.74 ns/op) [ 3,952.02,  3,999.22,  3,817.97,  3,751.38,  3,826.67,  3,921.40,  3,622.65]
            8 threads, Tavg =  4,273.42 ns/op (σ =  23.05 ns/op) [ 4,266.62,  4,216.29,  4,286.75,  4,274.38,  4,282.57,  4,279.76,  4,294.25,  4,287.74]
#
#-------------------------------------------------------------
# Proxy_isProxyClassTrue: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =     45.83 ns/op (σ =   0.00 ns/op) [    45.83]
#           1 threads, Tavg =     46.01 ns/op (σ =   0.00 ns/op) [    46.01]
# Measure:
            1 threads, Tavg =     43.14 ns/op (σ =   0.00 ns/op) [    43.14]
            2 threads, Tavg =     44.02 ns/op (σ =   1.00 ns/op) [    45.04,     43.04]
            3 threads, Tavg =     43.10 ns/op (σ =   0.07 ns/op) [    43.05,     43.05,     43.21]
            4 threads, Tavg =     43.23 ns/op (σ =   0.10 ns/op) [    43.37,     43.11,     43.25,     43.19]
            5 threads, Tavg =     51.09 ns/op (σ =  13.67 ns/op) [    43.10,     70.45,     43.29,     70.37,     43.17]
            6 threads, Tavg =     58.27 ns/op (σ =  11.26 ns/op) [    48.55,     70.86,     70.84,     69.18,     43.22,     60.39]
            7 threads, Tavg =     68.28 ns/op (σ =  18.38 ns/op) [    87.31,     90.73,     80.56,     87.92,     74.22,     48.55,     45.08]
            8 threads, Tavg =     72.06 ns/op (σ =  11.93 ns/op) [    90.15,     53.93,     70.32,     71.95,     70.49,     93.77,     70.39,     70.35]
#
#-------------------------------------------------------------
# Proxy_isProxyClassFalse: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36]
#           1 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36]
# Measure:
            1 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36]
            2 threads, Tavg =      1.37 ns/op (σ =   0.01 ns/op) [     1.38,      1.36]
            3 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36,      1.36,      1.36]
            4 threads, Tavg =      1.36 ns/op (σ =   0.01 ns/op) [     1.36,      1.36,      1.37,      1.36]
            5 threads, Tavg =      1.71 ns/op (σ =   0.53 ns/op) [     2.05,      1.64,      1.36,      2.74,      1.36]
            6 threads, Tavg =      2.04 ns/op (σ =   0.65 ns/op) [     2.71,      1.36,      2.56,      1.40,      2.73,      2.72]
            7 threads, Tavg =      2.40 ns/op (σ =   0.42 ns/op) [     2.72,      2.74,      2.47,      2.54,      2.79,      2.64,      1.53]
            8 threads, Tavg =      2.72 ns/op (σ =   0.47 ns/op) [     3.05,      2.95,      3.63,      2.89,      2.71,      2.61,      2.75,      1.87]
#
#-------------------------------------------------------------
# Annotation_equals: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =    197.25 ns/op (σ =   0.00 ns/op) [   197.25]
#           1 threads, Tavg =    192.44 ns/op (σ =   0.00 ns/op) [   192.44]
# Measure:
            1 threads, Tavg =    195.68 ns/op (σ =   0.00 ns/op) [   195.68]
            2 threads, Tavg =    194.68 ns/op (σ =   0.11 ns/op) [   194.79,    194.57]
            3 threads, Tavg =    194.86 ns/op (σ =   0.19 ns/op) [   195.13,    194.70,    194.76]
            4 threads, Tavg =    201.41 ns/op (σ =   0.38 ns/op) [   201.70,    200.78,    201.73,    201.45]
            5 threads, Tavg =    233.95 ns/op (σ =   9.60 ns/op) [   236.18,    240.84,    217.76,    231.22,    245.74]
            6 threads, Tavg =    266.14 ns/op (σ =   9.20 ns/op) [   275.03,    252.53,    268.96,    279.64,    259.52,    263.08]
            7 threads, Tavg =    300.65 ns/op (σ =  12.83 ns/op) [   272.32,    311.55,    311.84,    300.79,    298.32,    310.16,    303.63]
            8 threads, Tavg =    337.46 ns/op (σ =   1.70 ns/op) [   336.49,    335.10,    338.76,    338.11,    339.93,    336.73,    335.33,    339.30]
#
#-------------------------------------------------------------
# END.
##############################################################


*** Patched j.l.r.Proxy (WeakCache using validation in ValueFactory but an interface-based key instead of interface-name based)

##############################################################
# Java: 1.8.0-internal-peter_2013_04_19_08_58-b00
#   VM: OpenJDK 64-Bit Server VM 25.0-b28 (mixed mode)
#   OS: Linux 3.8.4-102.fc17.x86_64 (amd64)
# CPUs: 8 (virtual)
#
#-------------------------------------------------------------
# Proxy_getProxyClass: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =    175.73 ns/op (σ =   0.00 ns/op) [   175.73]
#           1 threads, Tavg =    171.07 ns/op (σ =   0.00 ns/op) [   171.07]
# Measure:
            1 threads, Tavg =    170.27 ns/op (σ =   0.00 ns/op) [   170.27]
            2 threads, Tavg =    173.89 ns/op (σ =   0.27 ns/op) [   174.17,    173.62]
            3 threads, Tavg =    218.23 ns/op (σ =   1.08 ns/op) [   219.26,    216.73,    218.71]
            4 threads, Tavg =    221.51 ns/op (σ =  17.53 ns/op) [   192.77,    233.04,    232.63,    233.60]
            5 threads, Tavg =    298.90 ns/op (σ =   8.15 ns/op) [   303.58,    298.65,    310.30,    297.53,    285.54]
            6 threads, Tavg =    258.71 ns/op (σ =  25.78 ns/op) [   220.33,    284.80,    268.33,    297.47,    244.84,    251.93]
            7 threads, Tavg =    289.94 ns/op (σ =  24.37 ns/op) [   234.85,    303.20,    292.25,    300.10,    295.90,    310.32,    309.57]
            8 threads, Tavg =    305.60 ns/op (σ =  14.31 ns/op) [   314.86,    297.66,    317.71,    313.77,    317.95,    315.38,    298.94,    274.22]
#
#-------------------------------------------------------------
# Proxy_isProxyClassTrue: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =     45.09 ns/op (σ =   0.00 ns/op) [    45.09]
#           1 threads, Tavg =     44.83 ns/op (σ =   0.00 ns/op) [    44.83]
# Measure:
            1 threads, Tavg =     41.33 ns/op (σ =   0.00 ns/op) [    41.33]
            2 threads, Tavg =     41.27 ns/op (σ =   0.02 ns/op) [    41.29,     41.25]
            3 threads, Tavg =     41.27 ns/op (σ =   0.04 ns/op) [    41.33,     41.25,     41.25]
            4 threads, Tavg =     42.22 ns/op (σ =   0.32 ns/op) [    42.59,     41.92,     42.49,     41.90]
            5 threads, Tavg =     49.03 ns/op (σ =  13.27 ns/op) [    41.33,     41.34,     67.91,     41.50,     67.70]
            6 threads, Tavg =     55.89 ns/op (σ =  11.67 ns/op) [    66.06,     42.08,     42.82,     68.00,     63.96,     67.73]
            7 threads, Tavg =     64.95 ns/op (σ =  32.85 ns/op) [   124.83,     69.59,     41.73,    118.79,     67.92,     67.09,     42.76]
            8 threads, Tavg =     70.24 ns/op (σ =  11.45 ns/op) [    67.49,     77.72,     79.36,     80.59,     45.74,     75.70,     83.08,     70.93]
#
#-------------------------------------------------------------
# Proxy_isProxyClassFalse: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =      1.37 ns/op (σ =   0.00 ns/op) [     1.37]
#           1 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36]
# Measure:
            1 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36]
            2 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36,      1.36]
            3 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36,      1.36,      1.36]
            4 threads, Tavg =      1.36 ns/op (σ =   0.00 ns/op) [     1.36,      1.36,      1.36,      1.37]
            5 threads, Tavg =      1.70 ns/op (σ =   0.50 ns/op) [     1.92,      1.36,      1.56,      1.48,      2.72]
            6 threads, Tavg =      2.09 ns/op (σ =   0.61 ns/op) [     2.71,      2.30,      1.49,      1.46,      2.79,      2.81]
            7 threads, Tavg =      2.38 ns/op (σ =   0.46 ns/op) [     2.71,      2.58,      1.42,      2.64,      2.74,      2.71,      2.72]
            8 threads, Tavg =      2.72 ns/op (σ =   1.02 ns/op) [     3.29,      1.41,      4.11,      1.87,      2.77,      3.70,      3.77,      3.98]
#
#-------------------------------------------------------------
# Annotation_equals: run duration:  5,000 ms
#
# Warm up:
#           1 threads, Tavg =    193.83 ns/op (σ =   0.00 ns/op) [   193.83]
#           1 threads, Tavg =    190.18 ns/op (σ =   0.00 ns/op) [   190.18]
# Measure:
            1 threads, Tavg =    195.49 ns/op (σ =   0.00 ns/op) [   195.49]
            2 threads, Tavg =    194.86 ns/op (σ =   0.10 ns/op) [   194.96,    194.76]
            3 threads, Tavg =    199.01 ns/op (σ =   2.89 ns/op) [   200.97,    201.22,    194.97]
            4 threads, Tavg =    205.99 ns/op (σ =   5.34 ns/op) [   202.70,    207.55,    214.13,    200.11]
            5 threads, Tavg =    235.22 ns/op (σ =   4.04 ns/op) [   230.85,    239.61,    240.59,    231.82,    233.57]
            6 threads, Tavg =    266.69 ns/op (σ =   7.50 ns/op) [   254.56,    275.95,    275.14,    264.65,    261.91,    269.18]
            7 threads, Tavg =    299.97 ns/op (σ =  11.61 ns/op) [   301.11,    303.72,    317.29,    292.71,    310.13,    278.22,    299.84]
            8 threads, Tavg =    342.21 ns/op (σ =   3.54 ns/op) [   338.33,    343.69,    341.64,    348.14,    342.97,    344.82,    342.53,    335.88]
#
#-------------------------------------------------------------
# END.
##############################################################


Summary (4 Cores x 2 Threads i7 CPU):

Test                     Threads  ns/op Original  WeakCache#1  WeakCache#2
=======================  =======  ==============  ===========  ===========
Proxy_getProxyClass            1        2,403.27     2,174.51       170.27
                               4        3,039.01     2,555.00       221.51
                               8        5,193.58     4,273.42       305.60

Proxy_isProxyClassTrue         1           95.02        43.14        41.33
                               4        2,266.29        43.23        42.22
                               8        4,782.29        72.06        70.24

Proxy_isProxyClassFalse        1           95.02         1.36         1.36
                               4        2,186.59         1.36         1.36
                               8        4,891.15         2.72         2.72

Annotation_equals              1          240.10       195.68       195.49
                               4        1,864.06       201.41       205.99
                               8        8,639.20       337.46       342.21
